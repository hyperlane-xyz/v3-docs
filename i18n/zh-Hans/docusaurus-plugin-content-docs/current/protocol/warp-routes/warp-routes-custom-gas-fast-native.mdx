# Warp Routesï¼šé€šè¿‡è‡ªå®šä¹‰ Gas ä»£å¸å®ç°å¿«é€ŸåŸç”Ÿè½¬è´¦

æœ¬æ–‡æ¡£å°†æŒ‡å¯¼ä½ å¦‚ä½•ä½¿ç”¨ Hyperlane é€šè¿‡è‡ªå®šä¹‰ gas ä»£å¸å®ç°ä¸ä½ çš„ L2 ä¹‹é—´çš„å¿«é€ŸåŸç”Ÿè½¬è´¦ã€‚

# ä¸»è¦åŠ¨æœº

1. åœ¨ä½ é€‰æ‹©çš„ L2 ä¸Šåˆ›å»ºè‡ªå®šä¹‰ gas ä»£å¸ã€‚
2. ä½¿ç”¨è¿™ä¸ª gas ä»£å¸å®ç°å¿«é€ŸåŸç”Ÿè½¬è´¦ï¼Œè€Œä¸æ˜¯é€šè¿‡è§„èŒƒæ¡¥ç­‰å¾…è¾ƒé•¿çš„ç»“ç®—æ—¶é—´ã€‚

# å‰ç½®æ¡ä»¶

è¦å®Œæˆä»¥ä¸‹æ¼”ç»ƒï¼Œä½ åº”è¯¥å‡†å¤‡ï¼š

1. ä¸€ä¸ª L2 ç½‘ç»œï¼ˆ"yourchain"ï¼‰ï¼Œä½ å¯ä»¥åœ¨å…¶ä¸ŠæŒ‡å®š[è‡ªå®šä¹‰ gas ä»£å¸](https://docs.arbitrum.io/launch-orbit-chain/how-tos/use-a-custom-gas-token)ï¼Œå¹¶å¸Œæœ›å®ç°ä¸å…¶ä¹‹é—´çš„å¿«é€ŸåŸç”Ÿè½¬è´¦ã€‚
2. ä¸€ä¸ªå”¯ä¸€çš„éƒ¨ç½²è€…æˆ–æˆæƒæ‰€æœ‰è€…ï¼Œç”¨äºæ¥æ”¶æ”¶æ®ä»£å¸çš„é“¸é€ ï¼ˆå…³äºè¿™ä¸ªä»£å¸çš„æ›´å¤šä¿¡æ¯è§ä¸‹æ–‡ï¼‰ã€‚
3. å·²å®‰è£… [Hyperlane CLI](https://docs.hyperlane.xyz/docs/reference/cli) å®ä¾‹ï¼Œå¹¶å°†é’±åŒ…ç§é’¥è®¾ç½®ä¸º `HYP_KEY` ç¯å¢ƒå˜é‡ï¼Œä¸”åœ¨æ‰€æœ‰ç›¸å…³ç½‘ç»œä¸Šéƒ½æœ‰èµ„é‡‘ã€‚

# æ¼”ç»ƒï¼šå¿«é€ŸåŸç”Ÿè½¬è´¦

:::info
æ³¨æ„ï¼Œä¸‹æ–‡ä¸­çš„"æ”¶æ®ä»£å¸"æ˜¯ä¸€ä¸ªï¼ˆä¸€æ¬¡æ€§ï¼‰å¯é“¸é€ çš„"è™šæ‹Ÿ"ä»£å¸ï¼Œç”¨äºåœ¨ yourchain å¯¹åº”çš„ L1 ä¸Šå¯¹ warp-route è¿›è¡ŒæŠµæŠ¼ã€‚ä½ å°†åœ¨åˆ›å»ºå®ƒä¹‹åé”€æ¯é“¸é€ æƒé™ã€‚

å¦å¤–ï¼Œæ ¹æ®ä½ çš„ L2ï¼Œä½ çš„è‡ªå®šä¹‰ gas ä»£å¸çš„ä»£å¸ç¬¦å·å¯èƒ½ä¼šè¢«åˆ†é…ä¸ä½ çš„æ”¶æ®ä»£å¸ç›¸åŒçš„ç¬¦å·ã€‚å¦‚æœåœ¨ä»¥å¤ªåŠä¸Šéƒ¨ç½²ï¼Œä½ å¯èƒ½æƒ³è¦å°†ç¬¦å·è®¾ç½®ä¸º `ETH`ã€‚
:::

## æ­¥éª¤

### 1) éƒ¨ç½²æ”¶æ®ä»£å¸

åœ¨ä»¥å¤ªåŠä¸Šéƒ¨ç½²ä¸€ä¸ª `ETH` æ”¶æ®ä»£å¸ï¼Œä½œä¸ºä½ çš„ L2 çš„è‡ªå®šä¹‰ gas ä»£å¸ã€‚

1. ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨å·²æœ‰èµ„é‡‘çš„é’±åŒ…é€šè¿‡ [Remix](https://remix.ethereum.org/) éƒ¨ç½²ä½ çš„æ”¶æ®ä»£å¸ï¼Œåˆçº¦ç±»ä¼¼å¦‚ä¸‹ï¼š

    ```solidity
    // SPDX-License-Identifier: MIT
    pragma solidity ^0.8.20;

    import "@openzeppelin/contracts/token/ERC20/ERC20.sol";

    contract YourchainETH is ERC20 {
        constructor() ERC20("YourchainETH", "ETH") {
            _mint(msg.sender, 10000000 * (10 ** 18));
        }
    }
    ```

2. ç¡®ä¿ä½ çš„ `ETH` æ”¶æ®ä»£å¸çš„å…¨éƒ¨ä¾›åº”é‡éƒ½é“¸é€ ç»™éƒ¨ç½²è€…æˆ–é€‰å®šçš„æˆæƒåœ°å€ã€‚è¿™å¿…é¡»æ˜¯ä¸€æ¬¡æ€§çš„é“¸é€ äº‹ä»¶ï¼Œä»¥é¿å…ç¨€é‡Šä¸‹é¢çš„ä»¥å¤ªåŠ â†” yourchain åŸç”Ÿ warp route çš„ä»·å€¼ã€‚
3. éƒ¨ç½²åï¼Œä¿å­˜åˆçº¦åœ°å€ä»¥ä¾›ä¸‹é¢ä½¿ç”¨ã€‚

### 2) è®¾ç½®è‡ªå®šä¹‰ Gas ä»£å¸

åœ¨ yourchain ä¸Šå°†æ–°éƒ¨ç½²çš„ `ETH` ERC20 æ”¶æ®ä»£å¸è®¾ç½®ä¸ºè‡ªå®šä¹‰ gas ä»£å¸ã€‚

1. ä½¿ç”¨ OP stack è®¾ç½®è‡ªå®šä¹‰ gas ä»£å¸ï¼šhttps://docs.optimism.io/builders/chain-operators/features/custom-gas-token
2. ä½¿ç”¨ arbitrum orbit è®¾ç½®è‡ªå®šä¹‰ gas ä»£å¸ï¼šhttps://docs.arbitrum.io/launch-orbit-chain/how-tos/use-a-custom-gas-token

### 3) è½¬ç§»æ‰€æœ‰æ”¶æ®ä»£å¸

ä½¿ç”¨ä½ çš„ L2 çš„è§„èŒƒæ¡¥å°† 100% çš„ `ETH` æ”¶æ®ä»£å¸ä»ä»¥å¤ªåŠè½¬ç§»åˆ° yourchainã€‚

1. ä½¿ç”¨ OP stack æ ‡å‡†æ¡¥è¿›è¡Œè½¬ç§»ï¼šhttps://docs.optimism.io/builders/app-developers/bridging/standard-bridge
2. ä½¿ç”¨ arbitrum orbit æ¡¥è¿›è¡Œè½¬ç§»ï¼šhttps://docs.arbitrum.io/launch-orbit-chain/how-tos/add-orbit-chain-to-bridge-ui

### 4) éƒ¨ç½²åŸç”Ÿ Warp Route

ä½¿ç”¨ Hyperlane CLIï¼Œéƒ¨ç½²ä»¥å¤ªåŠ `ETH` EvmHypNative â†” yourchain `ETH` EvmHypNative warp routeï¼š

1. è¿è¡Œ `hyperlane warp init` å¹¶å®Œæˆä»¥ä¸‹æµç¨‹ï¼š
    1. ä½¿ç”¨ç©ºæ ¼é€‰æ‹© `ethereum` å’Œ `yourchain`ï¼Œç„¶åæŒ‰å›è½¦ã€‚
    2. å¯¹äºä»¥å¤ªåŠï¼Œé€‰æ‹© `native` å¹¶æ¥å— mailboxã€‚
    3. å¯¹äº yourchainï¼Œé€‰æ‹© `native` å¹¶æ¥å— mailboxã€‚
2. åœ¨æ‰§è¡Œéƒ¨ç½²ä¹‹å‰ï¼Œç¡®ä¿ yourchain çš„ `metadata.yaml` å·²å®šä¹‰ `blockExplorers` å­—æ®µã€‚è¿™å¯¹äºåˆçº¦éªŒè¯æ˜¯å¿…éœ€çš„ï¼Œä»¥ä¾¿è½»æ¾åœ°å¯¹ yourchain çš„ warp route è¿›è¡ŒæŠµæŠ¼ã€‚
3. è¿è¡Œ `hyperlane warp deploy` å¹¶ç¡®è®¤ warp éƒ¨ç½²é…ç½®ç¬¦åˆé¢„æœŸã€‚
4. æ‰§è¡Œåï¼Œä½ çš„ `yourchain-ethereum-config.yaml` éƒ¨ç½²æ–‡ä»¶å°†ç±»ä¼¼äºä»¥ä¸‹å†…å®¹ï¼š

    ```solidity
    # yaml-language-server: $schema=../schema.json
    tokens:
      - addressOrDenom: "0x3e5bB1a03fef5DB15A320885E6A0C8Bff8b656bd"
        chainName: yourchain
        connections:
          - token: ethereum|ethereum|0x6d64832bDB4F04721D4F23CCbF17326cb636101e
        decimals: 18
        name: Ether
        standard: EvmHypNative
        symbol: ETH
      - addressOrDenom: "0x6d64832bDB4F04721D4F23CCbF17326cb636101e"
        chainName: ethereum
        connections:
          - token: ethereum|yourchain|0x3e5bB1a03fef5DB15A320885E6A0C8Bff8b656bd
        decimals: 18
        name: Ether
        standard: EvmHypNative
        symbol: ETH
    ```

### 5) ä¸ºä½ çš„ Warp Route æä¾›æŠµæŠ¼

é€šè¿‡ `receive()` å‡½æ•°å°† yourchain `ETH` ä½œä¸ºæŠµæŠ¼å­˜å…¥ yourchain çš„åŸç”Ÿ warp routeã€‚å¦‚æœéœ€è¦ï¼Œä½ å¯ä»¥ä½¿ç”¨å·²éªŒè¯çš„åˆçº¦é€šè¿‡ä½ çš„æ‰«æå™¨ UI æˆ–åƒ Metamask è¿™æ ·çš„é’±åŒ…æ¥å®Œæˆæ­¤æ“ä½œã€‚

è¿™ä¸ºåŸç”Ÿ warp route æä¾›æŠµæŠ¼ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿå¿«é€Ÿåœ°åœ¨ yourchain ä¹‹é—´æ¡¥æ¥ä»–ä»¬çš„åŸç”Ÿèµ„äº§ã€‚

### 6) æµ‹è¯•

ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å‘èµ·ä¸€ä¸ªå•ä¸ª wei çš„æµ‹è¯•è½¬è´¦ï¼š

```bash
hyperlane warp send --relay --symbol ETH
```

`--relay` æ ‡å¿—æ˜¯å¯é€‰çš„ï¼Œå®ƒä¼šå°†æ¶ˆæ¯ä¸­ç»§åˆ°ç›®æ ‡é“¾ã€‚

ä½ ä¹Ÿå¯ä»¥åœ¨åå°è¿è¡Œä¸€ä¸ªä»…ä¸ºä½ çš„ warp route ä¼ é€’çš„ä¸­ç»§å™¨ï¼š
```bash
hyperlane relayer --symbol TOKEN
```

:::tip
é»˜è®¤æƒ…å†µä¸‹ï¼Œä½ çš„ warp core é…ç½®ä½äºæœ¬åœ°æ³¨å†Œè¡¨çš„ `$HOME/.hyperlane/deployments/warp_routes` ä¸­ï¼Œå¯ä»¥ä¸ `--warp` æ ‡å¿—ä¸€èµ·ä½¿ç”¨ã€‚
:::

ä½ å¯ä»¥åœ¨è®¾ç½®äº† warp route çš„ä»»æ„æ–¹å‘ä¹‹é—´è¿›è¡Œæµ‹è¯•ã€‚

**ğŸ‰ æ­å–œï¼ä½ ç°åœ¨å·²ç»é€šè¿‡åœ¨ä½ çš„ L2 ä¸Šçš„è‡ªå®šä¹‰ gas ä»£å¸å®ç°äº†ä¸ yourchain ä¹‹é—´çš„å¿«é€ŸåŸç”Ÿè½¬è´¦ã€‚**

```mermaid
sequenceDiagram
		box ethereum L1
	    participant ycETH as ETH (ERC20)
			participant ETH as ETH (Native)
    end
		box yourchain L2
	    participant yETH as ETH (Native)
    end

    Note over yETH: 1) è®¾ç½®è‡ªå®šä¹‰ gas<br>ä»£å¸ä¸º ycETH
    ycETH-->>yETH: 2) è½¬ç§» 100%<br>æ”¶æ®ä»£å¸
    yETH-->>yETH: 3) å­˜å…¥åŸç”Ÿä»£å¸<br>ä½œä¸ºæŠµæŠ¼
    yETH-->ETH: <- å¿«é€Ÿ ETH è½¬è´¦ ->
```

:::warning
è¯·æ³¨æ„ï¼Œè¿™ç§æŠµæŠ¼ç­–ç•¥éœ€è¦æ‰¿æ‹…æŸäº› ISM ä¿¡ä»»å‡è®¾ã€‚
:::

:::info
çœ‹çœ‹ inEVM bridge ä»¥æŸ¥çœ‹è¿™äº› warp routes çš„å®é™…åº”ç”¨ç¤ºä¾‹ï¼šhttps://bridge.inevm.com/
:::

---

æŸ¥çœ‹ç”± Hyperlane æ”¯æŒå›¢é˜Ÿå’Œ Injective å‘å¸ƒçš„å…¶ä»–ä¿¡æ¯ï¼š

â†’ [inEVM èšç„¦ï¼šHyperlane](https://blog.injective.com/en/inevm-spotlight-hyperlane-2/)

â†’ [è¿æ¥ Injectiveï¼šHyperlane å¼€é€š inEVM Bridge](https://medium.com/hyperlane/connecting-injective-hyperlane-opens-the-inevm-bridge-6f1d3edf0ff8)

â†’ [Hyperlane å’Œ Injective | æ‰©å±•æœºé‡](https://medium.com/@kobriyyu/hyperlane-and-injective-expanding-opportunities-8ce170b72da7)
