# Fast/Canonical Warp Route Guide

This guide explains how to use Hyperlane's Fast Canonical Bridge to enable faster cross-chain transfers for native or ERC20 tokens. This bridge leverages a combination of canonical token transfers and liquidity providers.

## Primary Motives

1. Enable fast cross-chain transfers of native or ERC20 tokens.
2. Utilize liquidity providers to deliver tokens on the destination chain before full message settlement.

## Pre-Requisites

1. Native or ERC20 tokens deployed and configured on both source and destination chains.
2. The `FastTokenRouter` contract deployed and configured on both chains.
3. The [Hyperlane CLI](https://docs.hyperlane.xyz/docs/reference/cli) installed and a wallet private key sourced as `HYP_KEY`, funded on the relevant networks.

:::info
**Ensure you are using the latest version of the Hyperlane CLI.**

- You can update the CLI by running: `npm install -g @hyperlane-xyz/cli`
- Verify your version with:`hyperlane --version`

The latest version can be found in the Hyperlane CLI Documentation.
:::

## Walkthrough: Fast Canonical Bridge

### 1) Deploy a Warp Route

1. Run the following command to initialize the deployment:

   ```bash
   hyperlane warp init
   ```

   Follow the prompts during the initialization:

   1. Select Chains: Use the space bar to select `ethereum` and `yourchain`, then press Enter.
   2. Configure Source Chain: For `ethereum`, select `collateral` and accept the mailbox.
   3. Configure Destination Chain: For `yourchain`, select `collateral` and accept the mailbox.

2. Before proceeding with the deployment, update the `metadata.yaml` file for `yourchain` to include a `blockExplorers` field. This is required for contract verification in order to easily collateralize yourchain's warp route

3. Run the following command to deploy the warp route:

   ```bash
   hyperlane warp deploy
   ```

After deployment, a configuration file will be generated, such as `yourchain-ethereum-config.yaml`. This file contains details about the deployed contracts. It should look similar to the example below:

```yaml
# yaml-language-server: $schema=../schema.json
tokens:
  - addressOrDenom: "0x3e5bB1a03fef5DB15A320885E6A0C8Bff8b656bd"
    chainName: yourchain
    connections:
      - token: ethereum|ethereum|0x6d64832bDB4F04721D4F23CCbF17326cb636101e
    decimals: 18
    name: USDC
    standard: FastHypERC20Collateral
    symbol: USDC
  - addressOrDenom: "0x6d64832bDB4F04721D4F23CCbF17326cb636101e"
    chainName: ethereum
    connections:
      - token: ethereum|yourchain|0x3e5bB1a03fef5DB15A320885E6A0C8Bff8b656bd
    decimals: 18
    name: USDC
    standard: FastHypERC20Collateral
    symbol: USDC
```

### 2) Test the Deployment

After deploying the warp route, test it to ensure it functions correctly.

#### Initiate a Test Transfer

Use the following command to initiate a cross-chain transfer of tokens, _replace USDC with the symbol of your token_:

```bash
hyperlane warp send --relay --symbol USDC --amount 100 --to-address 0xRecipientAddress
```

#### Run the Relayer

To monitor and relay messages, run the relayer with the following command:

```bash
hyperlane relayer --symbol USDC
```

The relayer ensures that the cross-chain messages are processed and delivered to the destination chain.

## Troubleshooting

If you encounter any issues during deployment or testing:

- Error: Untracked Metadata: Ensure the `metadata.yaml` file is updated correctly with a blockExplorers field.
- Relayer Not Processing Messages: Verify that the relayer is running and configured to monitor the correct chains.
- Test Transfer Fails: Double-check the token addresses and recipient addresses in your configuration.

## Resources

For more in-depth details on these steps, follow the [Bridge a Token](/docs/guides/deploy-warp-route) guide.

- [FastTokenRouter Implementation](https://github.com/hyperlane-xyz/hyperlane-monorepo/blob/main/solidity/contracts/token/libs/FastTokenRouter.sol)
- [Metadata Configuration Guide](https://docs.hyperlane.xyz/docs/configuration/metadata)
