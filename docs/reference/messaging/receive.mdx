import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

import MessagingIsmDiagram from '@site/src/diagrams/messaging-isms.md';

import SimpleMessagingDiagram from '@site/src/diagrams/messaging-simple.md';

# æ¥æ”¶æ¶ˆæ¯

åˆçº¦å¯ä»¥é€šè¿‡å®ç°`handle`å‡½æ•°æ¥æ¥æ”¶é“¾é—´æ¶ˆæ¯ã€‚

<SimpleMessagingDiagram/>

## Handle

å½“æ”¶åˆ°æ¶ˆæ¯æ—¶ï¼Œè¯¥å‡½æ•°ç”±`Mailbox`åˆçº¦è°ƒç”¨ã€‚

:::danger
ä¸ºäº†ç¡®ä¿åªæ¥å—æœ‰æ•ˆçš„é“¾é—´æ¶ˆæ¯ï¼Œå°†[access control](#access-control)é™åˆ¶ä¸ºé‚®ç®±åœ°å€æ˜¯å¾ˆé‡è¦çš„ã€‚
:::

<Tabs groupId="lang">
<TabItem value="sol" label="Solidity">

```solidity file=<rootDir>/node_modules/@hyperlane-xyz/core/contracts/interfaces/IMessageRecipient.sol#L5-L9
```

**å‚æ•°**

- `origin`: åŸå§‹é“¾çš„åŸŸ
- `sender`: å‘ä»¶äººåœ¨åŸå§‹é“¾ä¸Šçš„åœ°å€ï¼Œä»¥bytes32è¡¨ç¤º
- `messageBody`: æ¶ˆæ¯ä½“å†…å®¹çš„åŸå§‹å­—èŠ‚

:::info
å‘é€åœ°å€å·¦å¡«å……ä¸º `bytes32`ï¼Œä»¥å…¼å®¹ä¸åŒå¯»å€çš„è™šæ‹Ÿæœºã€‚ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œ[`TypeCasts` library](../libraries/typecasts.mdx)ä¸­æä¾›äº†ä»¥ä¸‹å®ç”¨ç¨‹åºã€‚
```solidity file=<rootDir>/node_modules/@hyperlane-xyz/core/contracts/libs/TypeCasts.sol#L10-L13
```
:::

</TabItem>
<TabItem value="cw" label="CosmWasm">

ğŸš§ å³å°†åˆ°æ¥! ğŸš§

</TabItem>
<TabItem value="sl" label="Sealevel">

ğŸš§ å³å°†åˆ°æ¥! ğŸš§

</TabItem>
</Tabs>

### è®¿é—®æ§åˆ¶

å¦‚æœåˆçº¦åªæ¥å—é“¾é—´æ¶ˆæ¯çš„è°ƒç”¨ï¼Œ`handle`å‡½æ•°åº”é™åˆ¶ä¸ºé‚®ç®±åœ°å€ã€‚

ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œ [`MailboxClient` library](../libraries/mailboxclient.mdx)ä¸­æä¾›äº†ä»¥ä¸‹å®ç”¨ç¨‹åºã€‚

<Tabs groupId="lang">
<TabItem value="sol" label="Solidity">

```solidity file=<rootDir>/node_modules/@hyperlane-xyz/core/contracts/client/MailboxClient.sol#L45-L51
```

</TabItem>
<TabItem value="cw" label="CosmWasm">

ğŸš§ å³å°†åˆ°æ¥! ğŸš§

</TabItem>
<TabItem value="sl" label="Sealevel">

ğŸš§ å³å°†åˆ°æ¥! ğŸš§

</TabItem>
</Tabs>

### ç¤ºä¾‹

<Tabs groupId="lang">
<TabItem value="sol" label="Solidity">

```solidity file=<rootDir>/node_modules/@hyperlane-xyz/core/contracts/test/TestRecipient.sol#L30-L38
```

</TabItem>
<TabItem value="cw" label="CosmWasm">

ğŸš§ å³å°†åˆ°æ¥! ğŸš§

</TabItem>
<TabItem value="sl" label="Sealevel">

ğŸš§ å³å°†åˆ°æ¥! ğŸš§

</TabItem>
</Tabs>

## éªŒè¯

å½“æ”¶åˆ°æ¶ˆæ¯æ—¶ï¼Œåœ¨è°ƒç”¨æ¶ˆæ¯æ”¶ä»¶äººçš„`handle`ä¹‹å‰ï¼Œé‚®ç®±å°†ä½¿ç”¨[Interchain Security Module](../ISM/specify-your-ISM.mdx)éªŒè¯å®‰å…¨æ€§ã€‚

### Default Security

é»˜è®¤çš„ISMåœ°å€å¯ä»¥é€šè¿‡`defaultIsm`å‡½æ•°æŸ¥è¯¢ã€‚

<Tabs groupId="lang">
<TabItem value="sol" label="Solidity">

```solidity file=<rootDir>/node_modules/@hyperlane-xyz/core/contracts/interfaces/IMailbox.sol#L53
```

</TabItem>
</Tabs>

### æ¨¡å—åŒ–å®‰å…¨

ä¸ºäº†åˆ©ç”¨Hyperlaneçš„æ¨¡å—åŒ–å®‰å…¨æ€§ï¼Œæ¶ˆæ¯æ¥æ”¶è€…å¯ä»¥æŒ‡å®šä¸€ä¸ªè‡ªå®šä¹‰çš„é“¾é—´å®‰å…¨æ¨¡å—æ¥**éªŒè¯ä»»ä½•å…³äºä¼ å…¥æ¶ˆæ¯çš„å†…å®¹**ã€‚å½“æŒ‡å®šæ—¶ï¼Œè¯¥é‚®ç®±å°†éµä»æ­¤ISMã€‚

<MessagingIsmDiagram/>

<Tabs groupId="lang">
<TabItem value="sol" label="Solidity">

```solidity file=<rootDir>/node_modules/@hyperlane-xyz/core/contracts/interfaces/IInterchainSecurityModule.sol#L38-L41
```

</TabItem>
<TabItem value="cw" label="CosmWasm">

ğŸš§ å³å°†åˆ°æ¥! ğŸš§

</TabItem>
<TabItem value="sl" label="Sealevel">

ğŸš§ å³å°†åˆ°æ¥! ğŸš§

</TabItem>
</Tabs>
